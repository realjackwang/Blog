<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>ASC上课笔记 | Jack's Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=Description content="Jack's Blog"><link rel=prev href=https://hugo.wangbj.top/2019/01/%E6%88%91%E7%9A%84%E7%94%B5%E8%84%91%E4%B8%8A%E6%9C%89%E5%93%AA%E4%BA%9B%E7%A5%9E%E5%A5%87%E7%9A%84%E8%BD%AF%E4%BB%B6/><link rel=next href=https://hugo.wangbj.top/2019/12/%E5%88%A9%E7%94%A8github%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%BA%8A-mdpic/><link rel=canonical href=https://hugo.wangbj.top/2019/01/%E5%9F%B9%E8%AE%AD/><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary"><meta name=twitter:title content="ASC上课笔记"><meta name=twitter:description content="19/1/14 CPU（Central Processing Unit）架构： 冯诺依曼计算机结构
现代CPU
a = b + c 编译器：优化 指令时间
什么是CPU 完成基本的逻辑指令 基本的操作单元
MAC 乘加指令 a = b*c+d 一个指令周期执行一次乘累加
ALU(算数逻辑单元) L1(一级缓存) L2 L3
桌面程序 真正用于数值运算的指令很少
CPU架构 ###　简单的CPU
​ 取指 → 译码 → 执行 → 访存 → 写回
  流水线　Pipeline
内存是很慢的 400周期
  分支预测 Branch Prediction
  分支断定 Predication
用条件语句替换分支
  提升 IPC(instructions/cycle)
Add r0,r1 -> r2
Add_v (r0,r1&mldr;r8) -> r
超标量（增加流水线宽度）"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"ASC上课笔记","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/hugo.wangbj.top\/2019\/01\/%E5%9F%B9%E8%AE%AD\/"},"image":{"@type":"ImageObject","url":"https:\/\/hugo.wangbj.top\/cover.png","width":800,"height":600},"genre":"posts","keywords":"ASC","wordcount":156,"url":"https:\/\/hugo.wangbj.top\/2019\/01\/%E5%9F%B9%E8%AE%AD\/","datePublished":"2019-01-14T15:51:05\x2b00:00","dateModified":"2019-01-14T15:51:05\x2b00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"Jack Wang","logo":{"@type":"ImageObject","url":"https:\/\/hugo.wangbj.top\/logo.png","width":127,"height":40}},"description":""}</script><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/css/lib/fontawesome-free/all.min.min.css><link rel=stylesheet href=/css/lib/animate/animate.min.min.css></head><body><script>window.isDark=(window.localStorage&&window.localStorage.getItem('theme'))==='dark';window.isDark&&document.body.classList.add('dark-theme');</script><div class=wrapper><nav class=navbar><div class=navbar-container><div class=navbar-header><a href=https://hugo.wangbj.top>Jack's Blog</a></div><div class=navbar-menu><a class=menu-item href=https://hugo.wangbj.top/posts/>Posts</a>
<a class=menu-item href=https://hugo.wangbj.top/tags/>Tags</a>
<a class=menu-item href=https://hugo.wangbj.top/categories/>Categories</a>
<a class=menu-item href=https://hugo.wangbj.top/tips/>Tips</a>
<a class=menu-item href=https://blog.wangbj.top>🌐 Hexo</a>
<a class=menu-item href=https://hugo.wangbj.top/posts/index.xml>📮 RSS</a>
<a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw"></i></a></div></div></nav><nav class=navbar-mobile><div class=navbar-container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw"></i></a><span></span><a href=https://hugo.wangbj.top>Jack's Blog</a></div><div class=menu-toggle id=menu-toggle><span></span><span></span><span></span></div></div><div class=navbar-menu id=mobile-menu><a class=menu-item href=https://hugo.wangbj.top/posts/>Posts</a>
<a class=menu-item href=https://hugo.wangbj.top/tags/>Tags</a>
<a class=menu-item href=https://hugo.wangbj.top/categories/>Categories</a>
<a class=menu-item href=https://hugo.wangbj.top/tips/>Tips</a>
<a class=menu-item href=https://blog.wangbj.top>🌐 Hexo</a>
<a class=menu-item href=https://hugo.wangbj.top/posts/index.xml>📮 RSS</a></div></div></nav><main class=main><div class=container><article class=post-warp><h1 class="post-title animated flipInX">ASC上课笔记</h1><div class=post-meta><div class=post-meta-main><a class=author href=https://hugo.wangbj.top rel=author><i class="fas fa-user-circle fa-fw"></i>Jack Wang&nbsp;</a></div><div class=post-meta-other><i class="far fa-calendar-alt fa-fw"></i><time datetime=2019-01-14>2019-01-14</time>&nbsp;
<i class="fas fa-pencil-alt fa-fw"></i>about 156 words&nbsp;
<i class="far fa-clock fa-fw"></i>1 min&nbsp;<span id=/2019/01/%E5%9F%B9%E8%AE%AD/ class=leancloud_visitors data-flag-title=ASC上课笔记>
<i class="far fa-eye fa-fw"></i><span class=leancloud-visitors-count></span>pageviews
</span>&nbsp;</div></div><div class=post-featured-image><img src=/images/loading.svg data-sizes=auto data-src=https://i.loli.net/2019/12/16/thzW97oS8BRXV2y.png alt="featured image" class=lazyload></div><div class=post-toc id=post-toc><h2 class=post-toc-title>Table of Contents</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#cpu>什么是CPU</a></li><li><a href=#heading>桌面程序</a></li><li><a href=#cpu-1>CPU架构</a></li></ul></li></ul></nav></div></div><div class=post-toc-mobile id=post-toc-mobile><details><summary><div class=post-toc-title><span>Table of Contents</span><span><i class="details icon fas fa-angle-down"></i></span></div></summary><div class=post-toc-content><nav id=TableOfContentsMobile><ul><li><ul><li><a href=#cpu>什么是CPU</a></li><li><a href=#heading>桌面程序</a></li><li><a href=#cpu-1>CPU架构</a></li></ul></li></ul></nav></div></details></div><div class=post-content><a class=post-dummy-target id=19114></a><h1>19/1/14</h1><p>CPU（Central Processing Unit）架构： <strong>冯诺依曼</strong>计算机结构</p><p>现代CPU</p><p>a = b + c 编译器：优化 指令时间</p><a class=post-dummy-target id=cpu></a><h3>什么是CPU</h3><p>完成基本的逻辑指令 基本的操作单元</p><p>MAC 乘加指令 a = b*c+d 一个指令周期执行一次乘累加</p><p>ALU(算数逻辑单元) L1(一级缓存) L2 L3</p><p><img src=https://i.loli.net/2019/01/14/5c3beedc4f991.png alt=s></p><a class=post-dummy-target id=heading></a><h3>桌面程序</h3><p>真正用于数值运算的指令很少</p><a class=post-dummy-target id=cpu-1></a><h3>CPU架构</h3><p><img src=https://i.loli.net/2019/01/14/5c3bf11987047.jpg alt=x></p><p>###　简单的CPU</p><p><img src=https://i.loli.net/2019/01/14/5c3bf1c1452f9.png alt></p><p>​ 取指 → 译码 → 执行 → 访存 → 写回</p><ul><li><p><strong>流水线　Pipeline</strong></p><p>内存是很慢的 400周期</p></li><li><p><strong>分支预测 Branch Prediction</strong></p></li><li><p><strong>分支断定 Predication</strong></p><p>用条件语句替换分支</p></li><li><p><strong>提升 IPC(instructions/cycle)</strong></p><p>Add r0,r1 -> r2</p><p>Add_v (r0,r1&mldr;r8) -> r</p><p>超标量（增加流水线宽度）</p><p>N路超标量</p><p>问题：N倍资源、旁路网络N^2^</p><p>Sandy Bridge 超标量</p></li></ul><p><strong>指令调度</strong>
xor 异或
xor r1,r2 -> r3
add r3,r4 -> r4
sub r5,r2 -> r3
addi r3,1 -> r1</p><p><strong>寄存器重命名</strong> 替换寄存器
xor p1,p2 -> p6
add p6,p4 -> p7
sub p5,p2 -> p8
addi p8,1 -> p9
xor and sub 可以并行执行</p><p><strong>乱序执行 Out-of-Order(OoO) Execution</strong></p><p>重排指令，获得最大的吞吐率</p><p><strong>OoO Sandy Bridge</strong></p><p>μop 微指令</p><p><strong>乱序执行</strong></p><p>+IPC 接近理想状态
– 面积增加
– 功耗增加</p><p><strong>存储器架构/层次Memory Hierarchy</strong></p><p>存储器越大越慢</p><p>SRAM、DRAM(断电消失)、Flash、HDD</p><p><strong>缓存Caching</strong></p><p>缓存层次Cache Hierarchy</p><p>硬件管理：L1、L2、L3</p><p>软件管理：Main memory、Disk</p><p>缓存一致性</p><p><strong>存储器的另外设计考虑</strong></p><ul><li><p>分区Banking</p></li><li><p>一致性Coherency</p></li><li><p>控制器Memory Controller</p></li></ul><p><strong>CPU内部的并行性</strong></p><p><strong>线程级并行Thread-Level Parallelism</strong></p><p>栈 先进先出</p><p>队列</p><p><strong>锁、一致性和同一性</strong></p><p>问题: 多线程读写同一块数据
解决方法: 加锁</p><p><strong>结论</strong></p><p>CPU 为串行程序优化</p><p>缓慢的内存带宽（存储器带宽）将会是大问题</p><p>并行处理是方向</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>This article is updated with 2019-01-14</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=https://hugo.wangbj.top/2019/01/%E5%9F%B9%E8%AE%AD/index.md target=_blank></a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section><span class=tag><a href=https://hugo.wangbj.top/tags/asc/><i class="fas fa-tag fa-fw"></i>ASC</a></span></section><section><span><a href=javascript:window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=https://hugo.wangbj.top>Home</a></span></section></div><div class=post-nav><a href=https://hugo.wangbj.top/2019/01/%E6%88%91%E7%9A%84%E7%94%B5%E8%84%91%E4%B8%8A%E6%9C%89%E5%93%AA%E4%BA%9B%E7%A5%9E%E5%A5%87%E7%9A%84%E8%BD%AF%E4%BB%B6/ class=prev rel=prev title=我的电脑上有哪些神奇的软件><i class="fas fa-angle-left fa-fw"></i>我的电脑上有哪些神奇的软件</a>
<a href=https://hugo.wangbj.top/2019/12/%E5%88%A9%E7%94%A8github%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%BA%8A-mdpic/ class=next rel=next title=利用Github搭建自己的图床-MdPic>利用Github搭建自己的图床-MdPic<i class="fas fa-angle-right fa-fw"></i></a></div></div><div class=post-comment><div id=vcomments></div><script src=/js/lib/valine/Valine.min.min.js></script><script type=text/javascript>new Valine({el:"#vcomments",appId:"RVvg7rtMR7twqMytNDjBdtzB-gzGzoHsz",appKey:"CruAxmRzN5waIqSiWJIMsvQR",meta:["nick","mail"],notify:"false",verify:"false",avatar:"mp",placeholder:"欢迎留言！",visitor:"true",recordIP:"true",});</script></div></article></div></main><footer class=footer><div class=copyright><div class=copyright-line>Runs on 🚀 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreffer">Hugo</a> and ❤️ love</div><div class=copyright-line>Designed By <a href=https://github.com/spencerwooo/portfolio target=_blank rel="external nofollow noopener noreffer">🎉 @SpencerWoo</a></div><div class=copyright-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://hugo.wangbj.top>Jack Wang</a></span><span class=license>&nbsp;|&nbsp;<a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer><script src=/js/lib/jquery/jquery.slim.min.min.js></script><script src=/js/lib/lazysizes/lazysizes.min.min.js></script><script src=/js/lib/smooth-scroll/smooth-scroll.polyfills.min.min.js></script><script>window.scroll=new SmoothScroll('[data-scroll]',{speed:300,speedAsDuration:true});</script><script src=/js/blog.min.js></script></div><a href=# class=dynamic-to-top id=dynamic-to-top data-scroll><span>&nbsp;</span></a></body></html>